{% load static %}{% spaceless %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        @page {
            margin: 20px;
        }

        body {
            font-family: 'Arial', sans-serif;
            font-size: 11px;
            margin: 0;
            padding: 0;
            color: #333;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid #999;
            padding: 6px;
            text-align: left;
        }

        th {
            background-color: #f3f3f3;
        }

        .totals td {
            padding: 6px;
            text-align: right;
        }

            .totals td:first-child {
                text-align: left;
            }

        .footer, .signature {
            margin-top: 30px;
            font-size: 10px;
        }

        .signature {
            text-align: right;
            margin-top: 60px;
        }
        thead { display: table-header-group; }
        tfoot { display: table-footer-group; }
        tr { page-break-inside: avoid; }
    </style>
</head>
<body>
    <!-- Header Box Left Logo, Center Address, Right TAX INVOICE -->
    <div style="border: 1px solid #999; padding: 10px;">
        <table style="width: 100%; vertical-align: middle;">
            <tr>
                <td style="width: 20%; vertical-align: middle; text-align: left;">
                    <img src="{{ logo_uri }}" style="width:180px; height:auto;">
                </td>
                <td style="width: 50%; vertical-align: middle; text-align: center; font-size: 12px; line-height: 1.5;">
                    <strong style="font-size: 15px;">iSecure Solutions, a Brand of B16Ventures</strong><br>
                    #60 Swarupa, 5th West Cr, Riches Garden, RM Nagar,<br>
                    Bangalore 560016 | Ph: 916 916 8216<br>
                    support@isecuresolutions.in | www.isecuresolutions.in<br>
                    GSTIN: 29AVXPP2341P1ZJ &nbsp;
                </td>
                <td style="width: 30%; vertical-align: middle; text-align: right;">
                    <br>
                    <div style="font-size: 22px; font-weight: bold;">TAX INVOICE</div>
                    <br>
                    <br>
                    <div style="margin-top: 10px; font-size: 13px;"><strong>Invoice# {{ invoice.invoice_no }}</strong></div>
                </td>
            </tr>
        </table>
    </div>
    <!-- Invoice Info, Bill To, Ship To Section -->
    <table style="width: 100%; border: 1px solid #999; font-size: 11px; margin-top: 15px;">
        <tr>
            <td style="width: 30%; vertical-align: top; padding: 6px;">
                <table style="width: 100%; border: none; border-collapse: collapse; font-size: 11px;">
                    <tr><td style="border: none;"><strong>Invoice Date</strong></td><td style="border: none; width: 10px;">:</td><td style="border: none;"><strong>{{ invoice.invoice_date|date:"d/m/Y" }}</strong></td></tr>
                    <tr><td style="border: none;"><strong>Payment Terms</strong></td><td style="border: none; width: 10px;">:</td><td style="border: none;"><strong>Net {{ invoice.credit_days }}</strong></td></tr>
                    <tr><td style="border: none;"><strong>Due Date</strong></td><td style="border: none; width: 10px;">:</td><td style="border: none;"><strong>{{ due_date|date:"d/m/Y" }}</strong></td></tr>
                    <tr><td style="border: none;"><strong>P.O #</strong></td><td style="border: none; width: 10px;">:</td><td style="border: none;"><strong>{{ estimation.po_number }}</strong></td></tr>
                    <tr><td style="border: none;"><strong>Quote No</strong></td><td style="border: none; width: 10px;">:</td><td style="border: none;"><strong>{{ estimation.quote_no }}</strong></td></tr>
                </table>
            </td>
            <td style="width: 35%; vertical-align: top; padding: 6px;">
                <strong>Bill To :</strong><br><br>
                <span style="color:#000399; font-weight: bold; font-size: 12px;">{{ estimation.company_name|default:"-" }}</span><br>
                {{ estimation.billing_address|linebreaksbr }}<br>
                GSTIN {{ estimation.gst_no|default:"URP" }}
            </td>
            <td style="width: 35%; vertical-align: top; padding: 6px;">
                <strong>Ship To :</strong><br><br>
                <span style="color:#003399; font-weight: bold; font-size: 12px;">{{ estimation.company_name|default:"-" }}</span><br>
                {{ estimation.shipping_address|linebreaksbr }}
            </td>
        </tr>
    </table>

    <!-- Item Table -->
    <table style="margin-top: 20px;">
        <thead>
            <tr>
                <th style="width: 5%; text-align: left;">#</th>
                <th style="width: 50%; text-align: left;">Description</th>
                <th style="width: 10%; text-align: left;">HSN / SAC</th>
                <th style="width: 7%; text-align: right;">Qty</th>
                <th style="width: 8%; text-align: right;">UOM</th>
                <th style="width: 10%; text-align: right;">Rate</th>
                <th style="width: 10%; text-align: right;">Tax %</th>
                <th style="width: 10%; text-align: right;">Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td style="text-align: left;">{{ forloop.counter }}</td>            
                <td style="text-align: left;">{{ item.item_details }}</td>
                <td style="text-align: right; white-space: nowrap;">{{ item.hsn_sac|default:"-" }}</td>
                <td style="text-align: right; white-space: nowrap;">{{ item.quantity }}</td>
                <td style="text-align: right; white-space: nowrap;">
                    {{ item.uom|default:"Nos" }}
                </td>
                <td style="text-align: right; white-space: nowrap;">{{ item.rate }}</td>
                <td style="width: 10%; text-align: right; white-space: nowrap;">{{ item.tax|floatformat:0 }}%</td>
                <td style="text-align: right; white-space: nowrap;">
                    {{ item.base_amount|floatformat:2 }}
                </td>

            </tr>
            {% endfor %}
        </tbody>
    </table>


    <!-- Totals and Tax -->
    <table style="width: 100%; border: 1px solid #999; font-size: 11px;">
        <tr>
            <td style="width: 70%; border: 1px solid #999; padding: 6px;">
                <strong>Notes:</strong> Thanks for your business. We would like to serve you again
            </td>
            <td style="width: 30%; border: 1px solid #999; padding: 0;">
                <table style="width: 100%; border-collapse: collapse;">
                    <tr>
                        <td style="border: 1px solid #999; padding: 6px;">Sub Total</td>
                        <td style="border: 1px solid #999; padding: 6px; text-align: right;">
                            {{ sub_total|floatformat:2 }}
                        </td>
                    </tr>

                    {% if same_state %}
                    <tr>
                        <td style="border: 1px solid #999; padding: 6px;">SGST (9%)</td>
                        <td style="border: 1px solid #999; padding: 6px; text-align: right;">
                            {{ sgst|floatformat:2 }}
                        </td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #999; padding: 6px;">CGST (9%)</td>
                        <td style="border: 1px solid #999; padding: 6px; text-align: right;">
                            {{ cgst|floatformat:2 }}
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td style="border: 1px solid #999; padding: 6px;">IGST (18%)</td>
                        <td style="border: 1px solid #999; padding: 6px; text-align: right;">
                            {{ igst|floatformat:2 }}
                        </td>
                    </tr>
                    {% endif %} 
                    <tr>
                        <td style="border: 1px solid #999; padding: 6px;">
                            <strong>Total Amount</strong>
                        </td>
                        <td style="border: 1px solid #999; padding: 6px; text-align: right;">
                            <strong>{{ invoice.total_value }}</strong>
                        </td>
                    </tr>

                    <tr>
                        <td style="border: 1px solid #999; padding: 6px;">
                            Paid Amount
                        </td>
                        <td style="border: 1px solid #999; padding: 6px; text-align: right;">
                            {{ invoice.paid_amount }}
                        </td>
                    </tr>

                    <tr>
                        <td style="border: 1px solid #999; padding: 6px;">
                            <strong>Balance Amount</strong>
                        </td>
                        <td style="border: 1px solid #999; padding: 6px; text-align: right;">
                            <strong>{{ invoice.balance_due }}</strong>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>

    <!-- Amount in Words and Footer -->
    <table style="width:100%; margin-top:10px; font-size:11px; border-collapse:collapse;">
    
    <!-- Amount in Words -->
    <tr>
        <td colspan="2" style="border:1px solid #999; padding:6px;">
            <strong>Total In Words :</strong> {{ amount_in_words }}
        </td>
    </tr>

    <tr>
        <!-- LEFT reminder column -->
        <table style="width:100%; margin-top:10px; font-size:11px; border-collapse:collapse;">
            <tr>
                <!-- LEFT COLUMN -->
                <td style="width:70%; vertical-align:top; border:1px solid #999; padding:10px;">

                    <strong>Payment Options</strong><br><br>
                    <u>For Bank Transfer Please Find the details</u><br><br>

                    Name: B16 VENTURES<br>
                    Account Number: 233005001741<br>
                    IFSC Code: ICIC0002330<br>
                    Bank: ICICI Bank<br>
                    Branch: TC Palya, Bangalore

                    <br><br>

                    <strong>Terms & Conditions :</strong><br><br>

                    <div style="font-size:10px; line-height:1.3;">
                        {% for line in terms_pdf %}
                            <div style="margin-bottom:4px;">
                                {{ forloop.counter }}) {{ line }}
                            </div>
                        {% endfor %}
                    </div>

                    <br><br>

                    For any clarification please write to us at<br>
                    <strong>support@isecuresolutions.in</strong>

                </td>

                <!-- RIGHT COLUMN -->
                <td style="width:30%; vertical-align:top; border:1px solid #999; padding:10px; text-align:center;">

                    <strong>For iSecure Solutions</strong>

                </td>
            </tr>
        </table>
</body>
</html>
{% endspaceless %}
