<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Delivery Challan</title>

<style>
@page {
    size: A4;
    margin: 12mm;
}

body {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    color: #000;
}

/* ===== HEADER ===== */
.header-table {
    width: 100%;
    border-collapse: collapse;
    border: 1.2px solid #000;
}

.header-table td {
    border: 1px solid #000;
    padding: 6px;
    vertical-align: middle;
}

.logo img {
    max-height: 55px;
}

.company-name {
    font-weight: bold;
    font-size: 13px;
}

.right-title {
    text-align: center;
    font-weight: bold;
    font-size: 14px;
    letter-spacing: 0.5px;
}

/* ===== INFO TABLE ===== */
.info-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 4px;
}

.info-table td {
    border: 1px solid #000;
    padding: 6px;
    vertical-align: top;
}

/* ===== ITEMS TABLE ===== */
.items-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 6px;
}

.items-table th,
.items-table td {
    border: 1px solid #000;
    padding: 6px;
}

.items-table th {
    background: #d9d9d9;
    font-weight: bold;
    text-align: center;
}

.items-table td.desc {
    text-align: left;
    line-height: 1.4;
}

/* Avoid row break */
.items-table tr {
    page-break-inside: avoid;
}

/* ===== NOTE ===== */
.note-box {
    border: 1px solid #000;
    padding: 6px;
    margin-top: 6px;
    font-size: 10.5px;
    white-space: pre-line;
}

/* ===== SIGNATURE ===== */
.sign-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 30px;
}

.sign-table td {
    border: 1px solid #000;
    padding: 30px 6px;
    text-align: center;
    vertical-align: bottom;
    font-size: 10.5px;
}

.footer {
    text-align: center;
    font-size: 10px;
    margin-top: 6px;
}
</style>
</head>

<body>

<!-- ===== HEADER ===== -->
<table class="header-table">
<tr>
    <td width="20%" class="logo">
        <img src="{{ logo_uri }}" alt="Logo">
    </td>

    <td width="55%">
        <div class="company-name">{{ company_name }}</div>
        {{ company_address }}<br>
        GSTIN: {{ company_gstin }}<br>
        Ph: {{ company_phone }} | {{ company_email }}
    </td>

    <td width="25%" class="right-title">
        DELIVERY CHALLAN
    </td>
</tr>
</table>

<!-- ===== PARTY + DC INFO ===== -->
<table class="info-table">
<tr>
    <td width="60%">
        <strong>M/s:</strong> {{ dc.estimation.company_name }}<br>
        <strong>Attn:</strong> {{ dc.contact_person }}<br>
        {{ dc.delivery_address }}<br>
        <strong>Ph:</strong> {{ dc.contact_number }}
    </td>

    <td width="40%">
        <strong>DC No:</strong> {{ dc.dc_no }}<br>
        <strong>Date:</strong> {{ dc.dc_date|date:"d-M-Y" }}<br>
        <strong>PO No:</strong> {{ dc.po_no|default:"—" }}<br>
        <strong>PO Date:</strong> {{ dc.po_date|date:"d-M-Y"|default:"—" }}
    </td>
</tr>
</table>

<!-- ===== ITEMS ===== -->
<table class="items-table">
<thead>
<tr>
    <th width="5%">SL No</th>
    <th>Description</th>
    <th width="10%">Qty</th>
    <th width="10%">UOM</th>
</tr>
</thead>

<tbody>
{% for item in dc.items.all %}
<tr>
    <td align="center">{{ forloop.counter }}</td>
    <td class="desc">{{ item.description }}</td>
    <td align="center">{{ item.quantity }}</td>
    <td align="center">{{ item.uom }}</td>
</tr>
{% endfor %}
</tbody>
</table>

<!-- ===== NOTE ===== -->
<div class="note-box">
<strong>Note:</strong><br>
{{ dc.terms }}
</div>

<!-- ===== SIGNATURE ===== -->
<table class="sign-table">
<tr>
    <td width="33%">
        Received Sign<br><br>
        Received Name
    </td>

    <td width="33%">
        Delivered By
    </td>

    <td width="34%">
        For {{ company_name }}<br>
        Authorised Signatory
    </td>
</tr>
</table>

<div class="footer">
* E. & O. E &nbsp; * Subject to Jurisdiction<br>
<strong>Thank You for your Business!</strong>
</div>

</body>
</html>
